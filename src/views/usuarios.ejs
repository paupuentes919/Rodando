<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('./partials/head') %>
    <link rel="stylesheet" href="/CSS/styleregistro.css" />
    <link rel="stylesheet" href="/CSS/usuarios.css" />
  </head>

  <body>
    <%- include('./partials/header') %>
    <main class="main-back-img">
      <div class="titulo-contenedor">
        <h1 class="titulo-formulario"><strong>Lista de Usuarios</strong></h1>
        <a href="/usuarios/registro" class="enlace-crear">
          <button class="btn-crear">Crear usuario</button>
        </a>
      </div>
      <div class="container">
        <% if (locals.usuarios) { %>
        <div class="grilla-usuarios">
          <% for( let i = 0; i < usuarios.length; i++ ) { %>
          <article class="d-flex flex-column">
            <div class="mb-2 article-fields">
              <div class="d-flex justify-content-between">
                <h4>
                  <% if (usuarios[i].nombre) { %> <%= usuarios[i].nombre %> <%=
                  usuarios[i].apellido || "" %> <% } else { %> - <% } %>
                </h4>
                <% if (usuarios[i].imagen) { %>
                <img src="<%= usuarios[i].imagen %>" alt="<%= i %> - foto" />

                <% } %>
              </div>
              <h5>Tel: <%= usuarios[i].telefono || "-" %></h5>
              <h5>Direccion: <%= usuarios[i].direccion || "-" %></h5>
              <h5>Email: <%= usuarios[i].email || "-" %></h5>
              <h5>Rol: <%= usuarios[i].rol || "-" %></h5>
              <h5>Fecha de alta: <%= usuarios[i].fecha_creacion || "-" %></h5>
              <h5>
                Fecha de baja: <%= usuarios[i].fecha_eliminacion || "-" %>
              </h5>
              <h5>
                <% if (usuarios[i].sucursal) { %> Sucursal NÂ° <%=
                usuarios[i].sucursal.id || "" %> - <%=
                usuarios[i].sucursal.direccion || "" %> <% } else { %> - <% } %>
              </h5>
            </div>
            <div
              class="d-flex align-items-center justify-content-end gap-4 align-self-end"
            >
              <a href="/usuarios/editar/<%= usuarios[i].id %>">
                <button class="btn-edit" type="button">
                  <p>Editar</p>
                </button>
              </a>
              <form
                method="POST"
                action="/usuarios/<%= usuarios[i].id %>?_method=DELETE"
              >
                <button class="btn-delete">
                  <p>Borrar</p>
                </button>
              </form>
            </div>
          </article>
          <% } %>
        </div>
        <% } else { %>
        <p>no hay usuarios</p>
        <% } %>
      </div>
    </main>
    <%- include('./partials/footer2') %>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
